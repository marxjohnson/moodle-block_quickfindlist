define("block_quickfindlist/quickfindlist",["exports","core/ajax","core/pending","core/templates","core/notification"],(function(_exports,_ajax,_pending,_templates,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}let blockinstance;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_pending=_interopRequireDefault(_pending),_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification);const search=async(roleid,search)=>{const pending=new _pending.default("quickfindlist".concat(roleid)),progress=blockinstance.querySelector(".quickfindprogress");try{progress.style.visibility="visible";const results=await((blockinstanceid,search)=>(0,_ajax.call)([{methodname:"block_quickfindlist_search_users",args:{blockinstanceid:blockinstanceid,search:search}}])[0])(blockinstance.dataset.instanceId,search),{html:html,js:js}=await _templates.default.renderForPromise("block_quickfindlist/results",results);_templates.default.replaceNode(blockinstance.querySelector(".quickfindlistresults"),html,js),progress.style.visibility="hidden"}catch(e){return progress.style.visibility="hidden",_notification.default.exception(e),pending.reject()}return pending.resolve()},searchOnType=e=>{search(e.target.dataset.roleid,e.target.value)},searchOnSubmit=e=>{e.preventDefault();const searchInput=e.target.querySelector(".quickfindlistsearch");search(e.target.dataset.roleid,searchInput.value)};var _default={init(instanceid){blockinstance=document.querySelector('.block_quickfindlist[data-instance-id="'.concat(instanceid,'"]')),blockinstance.querySelector(".quickfindlistsearch").addEventListener("keyup",searchOnType),blockinstance.querySelector("form").addEventListener("submit",searchOnSubmit)}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=quickfindlist.min.js.map