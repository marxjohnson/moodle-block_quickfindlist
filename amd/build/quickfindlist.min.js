define ("block_quickfindlist/quickfindlist",["jquery"],function(a){var b={sesskey:null,instances:[],loginasurl:""},c={init:function init(d,e,f,g,h,i,j){b.sesskey=i;b.loginasurl=j;var k={roleid:d,userfields:e,url:f,courseformat:g,courseid:h,progress:a("#quickfindprogress"+d),listcontainer:a("#quickfindlist"+d),xhr:null};b.instances[d]=k;a("#quickfindlistsearch"+d).on("keyup",c.search_on_type);a("#quickfindform"+d).on("submit",c.search_on_submit)},search_on_type:function search_on_type(b){var d=a(b.target),e=d.val(),f=/[\-0-9]+/.exec(d.attr("id"))[0];c.search(e,f);M.util.js_pending("quickfindlist"+f)},search_on_submit:function search_on_submit(b){b.preventDefault();var d=a(b.target),e=/[\-0-9]+/.exec(d.attr("id"))[0],f=d.find("#quickfindlistsearch"+e).val();c.search(f,e);M.util.js_pending("quickfindlist"+e)},search:function search(c,d){var e=b.instances[d],f=M.cfg.wwwroot+"/blocks/quickfindlist/quickfind.php";if(null!==e.xhr){e.xhr.abort()}e.progress.css("visibility","visible");e.xhr=a.ajax({url:f,data:{role:d,name:c,courseformat:e.courseformat,courseid:e.courseid,sesskey:b.sesskey}}).done(function(c){var f=a("<ul />");for(var g in c.people){var h=e.userfields.replace("[[firstname]]",c.people[g].firstname);h=h.replace("[[lastname]]",c.people[g].lastname);h=h.replace("[[username]]",c.people[g].username);if(""!==b.loginasurl){var i="<a href=\""+b.loginasurl+"&user="+c.people[g].id+"&sesskey="+b.sesskey+"\"><i class=\"fa fa-user\"></i></a>"}else{i=""}var j=a("<li><a href=\""+e.url+"&id="+c.people[g].id+"\">"+h+"</a> "+i+"</li>");f.append(j)}a("#quickfindlist"+d).replaceWith(f);f.attr("id","quickfindlist"+d)}).fail(function(a,b){if("abort"!==b){if(b!==void 0){e.listcontainer.html(b)}}}).always(function(){e.progress.css("visibility","hidden");M.util.js_complete("quickfindlist"+d)})}};return c});
//# sourceMappingURL=quickfindlist.min.js.map
